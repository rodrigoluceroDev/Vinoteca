<!DOCTYPE html>
<html lang="es">
  <head>
    <title>Tienda de Licores - Carrito</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />

    <link href="https://fonts.googleapis.com/css2?family=Spectral:ital,wght@0,200;0,300;0,400;0,500;0,700;0,800;1,200;1,300;1,400;1,500;1,700&display=swap" rel="stylesheet" />

    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" />

    <link rel="stylesheet" href="css/animate.css" />
    <link rel="stylesheet" href="css/owl.carousel.min.css" />
    <link rel="stylesheet" href="css/owl.theme.default.min.css" />
    <link rel="stylesheet" href="css/magnific-popup.css" />

    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.13.1/css/bootstrap-select.min.css" />

    <link rel="stylesheet" href="css/flaticon.css" />
    <link rel="stylesheet" href="css/style.css" />

    <style>
      /* Ajustes para las imágenes de productos en la tabla */
      .img {
        width: 80px;
        height: 80px;
        background-size: cover;
        background-position: center;
        border-radius: 8px;
      }
      /* Centrar input de cantidad y ajustar tamaño */
      input.quantity {
        max-width: 80px;
        margin: auto;
        text-align: center;
      }
    </style>
  </head>
  <body>
    <!-- Header / Navbar (igual que en tu plantilla) -->
    <div class="wrap">
      <div class="container">
        <div class="row">
          <div class="col-md-6 d-flex align-items-center">
            <p class="mb-0 phone pl-md-2">
              <a href="#" class="mr-2"><span class="fa fa-phone mr-1"></span> +54261000000</a>
              <a href="#"><span class="fa fa-paper-plane mr-1"></span> salewine@email.com</a>
            </p>
          </div>
          <div class="col-md-6 d-flex justify-content-md-end">
            <div class="social-media mr-4">
              <p class="mb-0 d-flex">
                <a href="#" class="d-flex align-items-center justify-content-center">
                  <span class="fa fa-facebook"><i class="sr-only">Facebook</i></span>
                </a>
                <a href="#" class="d-flex align-items-center justify-content-center">
                  <span class="fa fa-twitter"><i class="sr-only">Twitter</i></span>
                </a>
                <a href="#" class="d-flex align-items-center justify-content-center">
                  <span class="fa fa-instagram"><i class="sr-only">Instagram</i></span>
                </a>
               
              </p>
            </div>
          </div>
        </div>
      </div>
    </div>

    <nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
      <div class="container">
        <a class="navbar-brand" href="index.html">Tienda de <span>Licores</span></a>
        <div class="order-lg-last btn-group">
          <a href="#" class="btn-cart dropdown-toggle dropdown-toggle-split" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
            <span class="flaticon-shopping-bag"></span>
            <div class="d-flex justify-content-center align-items-center"><small id="cart-count">0</small></div>
          </a>
          <div class="dropdown-menu dropdown-menu-right" id="cart-dropdown">
            <!-- Productos del carrito aquí vía JS -->
            <p class="dropdown-item text-center">No hay productos en el carrito.</p>
          </div>
        </div>

        <button
          class="navbar-toggler"
          type="button"
          data-toggle="collapse"
          data-target="#ftco-nav"
          aria-controls="ftco-nav"
          aria-expanded="false"
          aria-label="Toggle navigation"
        >
          <span class="oi oi-menu"></span> Menu
        </button>

        <div class="collapse navbar-collapse" id="ftco-nav">
          <ul class="navbar-nav ml-auto">
            <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
            <li class="nav-item"><a href="about.html" class="nav-link">Acerca de</a></li>
            <li class="nav-item dropdown">
              <a
                class="nav-link dropdown-toggle"
                href="#"
                id="dropdown04"
                data-toggle="dropdown"
                aria-haspopup="true"
                aria-expanded="false"
                >Productos</a
              >
              <div class="dropdown-menu" aria-labelledby="dropdown04">
                <a class="dropdown-item" href="product.html">Productos</a>
                <a class="dropdown-item" href="product-single.html">Productos Individuales</a>
                <a class="dropdown-item" href="cart.html">Carrito</a>
                <a class="dropdown-item" href="checkout.html">Verificar</a>
              </div>
            </li>
            <li class="nav-item"><a href="blog.html" class="nav-link">Blog</a></li>
            <li class="nav-item"><a href="contact.html" class="nav-link">Contacto</a></li>
          </ul>
        </div>
      </div>
    </nav>
    <!-- END nav -->

    <!-- Hero -->
    <section class="hero-wrap hero-wrap-2" style="background-image: url('images/bg_2.jpg');" data-stellar-background-ratio="0.5">
      <div class="overlay"></div>
      <div class="container">
        <div class="row no-gutters slider-text align-items-end justify-content-center">
          <div class="col-md-9 ftco-animate mb-5 text-center">
            <p class="breadcrumbs mb-0">
              <span class="mr-2"><a href="index.html">Home <i class="fa fa-chevron-right"></i></a></span> <span>Carrito <i class="fa fa-chevron-right"></i></span>
            </p>
            <h2 class="mb-0 bread">Mi pedido</h2>
          </div>
        </div>
      </div>
    </section>

   <!-- CONTENIDO PRINCIPAL DEL CARRITO -->
    <section class="ftco-section">
      <div class="container">
        <div class="row">
          <div class="table-wrap">
            <table class="table">
              <thead class="thead-primary">
                <tr>
                  <th>&nbsp;</th>
                  <th>&nbsp;</th>
                  <th>Producto</th>
                  <th>Precio</th>
                  <th>Cantidad</th>
                  <th>TOTAL</th>
                  <th>&nbsp;</th>
                </tr>
              </thead>
              <tbody id="cart-items">
                <!-- JS inyecta los productos acá -->
              </tbody>
            </table>
          </div>
        </div>

        <div class="row justify-content-end">
          <div class="col col-lg-5 col-md-6 mt-5 cart-wrap ftco-animate">
            <div class="cart-total mb-3">
              <h3>TOTAL</h3>
              <p class="d-flex">
                <span>Subtotal</span>
                <span id="subtotal">$0.00</span>
              </p>
              <p class="d-flex">
                <span>Delivery</span>
                <span>$0.00</span>
              </p>
              <p class="d-flex">
                <span>Descuento</span>
                <span>$0.00</span>
              </p>
              <hr />
              <p class="d-flex total-price">
                <span>Total</span>
                <span id="total">$0.00</span>
              </p>
            </div>
            <p class="text-center">
              <a href="checkout.html" class="btn btn-primary py-3 px-4">FINALIZAR COMPRA</a>
            </p>
          </div>
        </div>
      </div>
    </section>

    <!-- Footer -->
    <!-- (Pegá aquí el footer que ya tenías, no lo repito por espacio) -->

    <!-- Scripts -->
    <script src="js/jquery.min.js"></script>
    <script src="js/bootstrap.min.js"></script>

    <!-- SCRIPT PARA CARGAR EL CARRITO DESDE localStorage -->
    <script>
      function getCart() {
        return JSON.parse(localStorage.getItem("carrito")) || [];
      }

      function saveCart(cart) {
        localStorage.setItem("carrito", JSON.stringify(cart));
      }

      function formatPrice(price) {
        return "$" + price.toFixed(2);
      }

      function renderCart() {
        const cart = getCart();
        const tbody = document.getElementById("cart-items");
        tbody.innerHTML = "";

        if (cart.length === 0) {
          tbody.innerHTML = `<tr><td colspan="7" class="text-center">No hay productos en el carrito.</td></tr>`;
          document.getElementById("subtotal").innerText = "$0.00";
          document.getElementById("total").innerText = "$0.00";
          return;
        }

        let subtotal = 0;

        cart.forEach((item, index) => {
          const totalProduct = item.price * item.quantity;
          subtotal += totalProduct;

          const tr = document.createElement("tr");
          tr.innerHTML = `
            <td></td>
            <td><img src="${item.image}" width="50" /></td>
            <td>${item.name}</td>
            <td>${formatPrice(item.price)}</td>
            <td><input type="number" min="1" value="${item.quantity}" data-index="${index}" class="form-control quantity-input"></td>
            <td>${formatPrice(totalProduct)}</td>
            <td><button class="btn btn-danger btn-sm btn-remove" data-index="${index}">X</button></td>
          `;
          tbody.appendChild(tr);
        });

        document.getElementById("subtotal").innerText = formatPrice(subtotal);
        document.getElementById("total").innerText = formatPrice(subtotal); // Puedes sumar delivery o restar descuento aquí
      }

      document.addEventListener("DOMContentLoaded", () => {
        renderCart();

        document.getElementById("cart-items").addEventListener("input", (e) => {
          if (e.target.classList.contains("quantity-input")) {
            const index = e.target.dataset.index;
            let cart = getCart();
            let qty = parseInt(e.target.value);
            if (qty < 1 || isNaN(qty)) qty = 1;
            cart[index].quantity = qty;
            saveCart(cart);
            renderCart();
          }
        });

        document.getElementById("cart-items").addEventListener("click", (e) => {
          if (e.target.classList.contains("btn-remove")) {
            const index = e.target.dataset.index;
            let cart = getCart();
            cart.splice(index, 1);
            saveCart(cart);
            renderCart();
          }
        });
      });
    </script>
  </body>
</html>
